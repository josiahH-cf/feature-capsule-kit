# Final Bundle Verifier/Packager

Generated by infrastructure builder â€“ do not edit by hand; re-run builder to update.

Overview
- Verifies a single feature capsule under `/features/<feature_id>/` against hard gates.
- On PASS, builds a delivery bundle under `/final_feature_documents/` with manifest and summary.

Usage
```
tools/final_bundle/verify_and_package.sh feature_id=<kebab-id> [allow_gt_1600_tokens=yes|no]
# Fallback
python3 tools/final_bundle/verify_and_package.py <kebab-id> --allow-gt-1600-tokens <yes|no>
```

Inputs
- feature_id: required, kebab-case
- allow_gt_1600_tokens: yes|no (default no). If no, auto-splits a long implementation brief.

Exit codes (shell)
- 0: success (bundle created)
- 2: bad usage
- 3..9: hard STOP reasons (see STOP/NEED/PATHS output)

Outputs
- Console: STOP/NEED/PATHS on failure; exact success line on pass.
- Bundle: `final_feature_documents/<feature_id>-<SCHEMA_SEMVER>-<DATE>-<COMMIT>/`
- Manifest: `manifest.json` validated against `schemas/bundle_manifest.schema.json` (best-effort)
- Summary: `SUMMARY.txt` (one screen overview)
- Record: appended to `capsule/reports/final_bundle_verification.md`

Idempotence
- Overwrites the target bundle atomically using a temp dir + rename on re-runs.

